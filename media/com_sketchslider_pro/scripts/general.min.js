jQuery(document).ready(function () {
  jQuery(".toggler").click(function () {
    jQuery(".sketch_menu").toggleClass("open"),
      jQuery(".sketch_content").toggleClass("open");
  }),
    jQuery(".container-title").appendTo(".subhead .btn-toolbar");
});
!(function (e) {
  (e.flexslider = function (t, a) {
    var n = e(t);
    n.vars = e.extend({}, e.flexslider.defaults, a);
    var i,
      s = n.vars.namespace,
      r =
        window.navigator &&
        window.navigator.msPointerEnabled &&
        window.MSGesture,
      o =
        ("ontouchstart" in window ||
          r ||
          (window.DocumentTouch && document instanceof DocumentTouch)) &&
        n.vars.touch,
      l = "click touchend MSPointerUp keyup",
      c = "",
      d = "vertical" === n.vars.direction,
      u = n.vars.reverse,
      v = n.vars.itemWidth > 0,
      p = "fade" === n.vars.animation,
      m = "" !== n.vars.asNavFor,
      f = {},
      g = !0;
    e.data(t, "flexslider", n),
      (f = {
        init: function () {
          (n.animating = !1),
            (n.currentSlide = parseInt(
              n.vars.startAt ? n.vars.startAt : 0,
              10
            )),
            isNaN(n.currentSlide) && (n.currentSlide = 0),
            (n.animatingTo = n.currentSlide),
            (n.atEnd = 0 === n.currentSlide || n.currentSlide === n.last),
            (n.containerSelector = n.vars.selector.substr(
              0,
              n.vars.selector.search(" ")
            )),
            (n.slides = e(n.vars.selector, n)),
            (n.container = e(n.containerSelector, n)),
            (n.count = n.slides.length),
            (n.syncExists = e(n.vars.sync).length > 0),
            "slide" === n.vars.animation && (n.vars.animation = "swing"),
            (n.prop = d ? "top" : "marginLeft"),
            (n.args = {}),
            (n.manualPause = !1),
            (n.stopped = !1),
            (n.started = !1),
            (n.startTimeout = null),
            (n.transitions =
              !n.vars.video &&
              !p &&
              n.vars.useCSS &&
              (function () {
                var e = document.createElement("div"),
                  t = [
                    "perspectiveProperty",
                    "WebkitPerspective",
                    "MozPerspective",
                    "OPerspective",
                    "msPerspective",
                  ];
                for (var a in t)
                  if (void 0 !== e.style[t[a]])
                    return (
                      (n.pfx = t[a].replace("Perspective", "").toLowerCase()),
                      (n.prop = "-" + n.pfx + "-transform"),
                      !0
                    );
                return !1;
              })()),
            (n.ensureAnimationEnd = ""),
            "" !== n.vars.controlsContainer &&
              (n.controlsContainer =
                e(n.vars.controlsContainer).length > 0 &&
                e(n.vars.controlsContainer)),
            "" !== n.vars.manualControls &&
              (n.manualControls =
                e(n.vars.manualControls).length > 0 &&
                e(n.vars.manualControls)),
            "" !== n.vars.customDirectionNav &&
              (n.customDirectionNav =
                2 === e(n.vars.customDirectionNav).length &&
                e(n.vars.customDirectionNav)),
            n.vars.randomize &&
              (n.slides.sort(function () {
                return Math.round(Math.random()) - 0.5;
              }),
              n.container.empty().append(n.slides)),
            n.doMath(),
            n.setup("init"),
            n.vars.controlNav && f.controlNav.setup(),
            n.vars.directionNav && f.directionNav.setup(),
            n.vars.keyboard &&
              (1 === e(n.containerSelector).length ||
                n.vars.multipleKeyboard) &&
              e(document).bind("keyup", function (e) {
                var t = e.keyCode;
                if (!n.animating && (39 === t || 37 === t)) {
                  var a =
                    39 === t
                      ? n.getTarget("next")
                      : 37 === t && n.getTarget("prev");
                  n.flexAnimate(a, n.vars.pauseOnAction);
                }
              }),
            n.vars.mousewheel &&
              n.bind("mousewheel", function (e, t, a, i) {
                e.preventDefault();
                var s = n.getTarget(0 > t ? "next" : "prev");
                n.flexAnimate(s, n.vars.pauseOnAction);
              }),
            n.vars.pausePlay && f.pausePlay.setup(),
            n.vars.slideshow &&
              n.vars.pauseInvisible &&
              f.pauseInvisible.init(),
            n.vars.slideshow &&
              (n.vars.pauseOnHover &&
                n.hover(
                  function () {
                    n.manualPlay || n.manualPause || n.pause();
                  },
                  function () {
                    n.manualPause || n.manualPlay || n.stopped || n.play();
                  }
                ),
              (n.vars.pauseInvisible && f.pauseInvisible.isHidden()) ||
                (n.vars.initDelay > 0
                  ? (n.startTimeout = setTimeout(n.play, n.vars.initDelay))
                  : n.play())),
            m && f.asNav.setup(),
            o && n.vars.touch && f.touch(),
            (!p || (p && n.vars.smoothHeight)) &&
              e(window).bind("resize orientationchange focus", f.resize),
            n.find("img").attr("draggable", "false"),
            setTimeout(function () {
              n.vars.start(n);
            }, 200);
        },
        asNav: {
          setup: function () {
            (n.asNav = !0),
              (n.animatingTo = Math.floor(n.currentSlide / n.move)),
              (n.currentItem = n.currentSlide),
              n.slides
                .removeClass(s + "active-slide")
                .eq(n.currentItem)
                .addClass(s + "active-slide"),
              r
                ? ((t._slider = n),
                  n.slides.each(function () {
                    var t = this;
                    (t._gesture = new MSGesture()),
                      (t._gesture.target = t),
                      t.addEventListener(
                        "MSPointerDown",
                        function (e) {
                          e.preventDefault(),
                            e.currentTarget._gesture &&
                              e.currentTarget._gesture.addPointer(e.pointerId);
                        },
                        !1
                      ),
                      t.addEventListener("MSGestureTap", function (t) {
                        t.preventDefault();
                        var a = e(this),
                          i = a.index();
                        e(n.vars.asNavFor).data("flexslider").animating ||
                          a.hasClass("active") ||
                          ((n.direction = n.currentItem < i ? "next" : "prev"),
                          n.flexAnimate(i, n.vars.pauseOnAction, !1, !0, !0));
                      });
                  }))
                : n.slides.on(l, function (t) {
                    t.preventDefault();
                    var a = e(this),
                      i = a.index(),
                      r = a.offset().left - e(n).scrollLeft();
                    0 >= r && a.hasClass(s + "active-slide")
                      ? n.flexAnimate(n.getTarget("prev"), !0)
                      : e(n.vars.asNavFor).data("flexslider").animating ||
                        a.hasClass(s + "active-slide") ||
                        ((n.direction = n.currentItem < i ? "next" : "prev"),
                        n.flexAnimate(i, n.vars.pauseOnAction, !1, !0, !0));
                  });
          },
        },
        controlNav: {
          setup: function () {
            n.manualControls
              ? f.controlNav.setupManual()
              : f.controlNav.setupPaging();
          },
          setupPaging: function () {
            var t,
              a,
              i =
                "thumbnails" === n.vars.controlNav
                  ? "control-thumbs"
                  : "control-paging",
              r = 1;
            if (
              ((n.controlNavScaffold = e(
                '<ol class="' + s + "control-nav " + s + i + '"></ol>'
              )),
              n.pagingCount > 1)
            )
              for (var o = 0; o < n.pagingCount; o++) {
                if (
                  ((a = n.slides.eq(o)),
                  (t =
                    "thumbnails" === n.vars.controlNav
                      ? '<img src="' + a.attr("data-thumb") + '"/>'
                      : "<a>" + r + "</a>"),
                  "thumbnails" === n.vars.controlNav &&
                    !0 === n.vars.thumbCaptions)
                ) {
                  var d = a.attr("data-thumbcaption");
                  "" !== d &&
                    void 0 !== d &&
                    (t += '<span class="' + s + 'caption">' + d + "</span>");
                }
                n.controlNavScaffold.append("<li>" + t + "</li>"), r++;
              }
            n.controlsContainer
              ? e(n.controlsContainer).append(n.controlNavScaffold)
              : n.append(n.controlNavScaffold),
              f.controlNav.set(),
              f.controlNav.active(),
              n.controlNavScaffold.delegate("a, img", l, function (t) {
                if ((t.preventDefault(), "" === c || c === t.type)) {
                  var a = e(this),
                    i = n.controlNav.index(a);
                  a.hasClass(s + "active") ||
                    ((n.direction = i > n.currentSlide ? "next" : "prev"),
                    n.flexAnimate(i, n.vars.pauseOnAction));
                }
                "" === c && (c = t.type), f.setToClearWatchedEvent();
              });
          },
          setupManual: function () {
            (n.controlNav = n.manualControls),
              f.controlNav.active(),
              n.controlNav.bind(l, function (t) {
                if ((t.preventDefault(), "" === c || c === t.type)) {
                  var a = e(this),
                    i = n.controlNav.index(a);
                  a.hasClass(s + "active") ||
                    ((n.direction = i > n.currentSlide ? "next" : "prev"),
                    n.flexAnimate(i, n.vars.pauseOnAction));
                }
                "" === c && (c = t.type), f.setToClearWatchedEvent();
              });
          },
          set: function () {
            var t = "thumbnails" === n.vars.controlNav ? "img" : "a";
            n.controlNav = e(
              "." + s + "control-nav li " + t,
              n.controlsContainer ? n.controlsContainer : n
            );
          },
          active: function () {
            n.controlNav
              .removeClass(s + "active")
              .eq(n.animatingTo)
              .addClass(s + "active");
          },
          update: function (t, a) {
            n.pagingCount > 1 && "add" === t
              ? n.controlNavScaffold.append(
                  e("<li><a>" + n.count + "</a></li>")
                )
              : 1 === n.pagingCount
              ? n.controlNavScaffold.find("li").remove()
              : n.controlNav.eq(a).closest("li").remove(),
              f.controlNav.set(),
              n.pagingCount > 1 && n.pagingCount !== n.controlNav.length
                ? n.update(a, t)
                : f.controlNav.active();
          },
        },
        directionNav: {
          setup: function () {
            var t = e(
              '<ul class="' +
                s +
                'direction-nav"><li class="' +
                s +
                'nav-prev"><a class="' +
                s +
                'prev" href="#">' +
                n.vars.prevText +
                '</a></li><li class="' +
                s +
                'nav-next"><a class="' +
                s +
                'next" href="#">' +
                n.vars.nextText +
                "</a></li></ul>"
            );
            n.customDirectionNav
              ? (n.directionNav = n.customDirectionNav)
              : n.controlsContainer
              ? (e(n.controlsContainer).append(t),
                (n.directionNav = e(
                  "." + s + "direction-nav li a",
                  n.controlsContainer
                )))
              : (n.append(t),
                (n.directionNav = e("." + s + "direction-nav li a", n))),
              f.directionNav.update(),
              n.directionNav.bind(l, function (t) {
                t.preventDefault();
                var a;
                ("" === c || c === t.type) &&
                  ((a = n.getTarget(
                    e(this).hasClass(s + "next") ? "next" : "prev"
                  )),
                  n.flexAnimate(a, n.vars.pauseOnAction)),
                  "" === c && (c = t.type),
                  f.setToClearWatchedEvent();
              });
          },
          update: function () {
            var e = s + "disabled";
            1 === n.pagingCount
              ? n.directionNav.addClass(e).attr("tabindex", "-1")
              : n.vars.animationLoop
              ? n.directionNav.removeClass(e).removeAttr("tabindex")
              : 0 === n.animatingTo
              ? n.directionNav
                  .removeClass(e)
                  .filter("." + s + "prev")
                  .addClass(e)
                  .attr("tabindex", "-1")
              : n.animatingTo === n.last
              ? n.directionNav
                  .removeClass(e)
                  .filter("." + s + "next")
                  .addClass(e)
                  .attr("tabindex", "-1")
              : n.directionNav.removeClass(e).removeAttr("tabindex");
          },
        },
        pausePlay: {
          setup: function () {
            var t = e('<div class="' + s + 'pauseplay"><a></a></div>');
            n.controlsContainer
              ? (n.controlsContainer.append(t),
                (n.pausePlay = e("." + s + "pauseplay a", n.controlsContainer)))
              : (n.append(t), (n.pausePlay = e("." + s + "pauseplay a", n))),
              f.pausePlay.update(n.vars.slideshow ? s + "pause" : s + "play"),
              n.pausePlay.bind(l, function (t) {
                t.preventDefault(),
                  ("" === c || c === t.type) &&
                    (e(this).hasClass(s + "pause")
                      ? ((n.manualPause = !0), (n.manualPlay = !1), n.pause())
                      : ((n.manualPause = !1), (n.manualPlay = !0), n.play())),
                  "" === c && (c = t.type),
                  f.setToClearWatchedEvent();
              });
          },
          update: function (e) {
            "play" === e
              ? n.pausePlay
                  .removeClass(s + "pause")
                  .addClass(s + "play")
                  .html(n.vars.playText)
              : n.pausePlay
                  .removeClass(s + "play")
                  .addClass(s + "pause")
                  .html(n.vars.pauseText);
          },
        },
        touch: function () {
          function e(e) {
            e.stopPropagation(),
              n.animating
                ? e.preventDefault()
                : (n.pause(),
                  t._gesture.addPointer(e.pointerId),
                  (w = 0),
                  (c = d ? n.h : n.w),
                  (f = Number(new Date())),
                  (l =
                    v && u && n.animatingTo === n.last
                      ? 0
                      : v && u
                      ? n.limit -
                        (n.itemW + n.vars.itemMargin) * n.move * n.animatingTo
                      : v && n.currentSlide === n.last
                      ? n.limit
                      : v
                      ? (n.itemW + n.vars.itemMargin) * n.move * n.currentSlide
                      : u
                      ? (n.last - n.currentSlide + n.cloneOffset) * c
                      : (n.currentSlide + n.cloneOffset) * c));
          }
          function a(e) {
            e.stopPropagation();
            var a = e.target._slider;
            if (a) {
              var n = -e.translationX,
                i = -e.translationY;
              return (
                (w += d ? i : n),
                (m = w),
                (y = d
                  ? Math.abs(w) < Math.abs(-n)
                  : Math.abs(w) < Math.abs(-i)),
                e.detail === e.MSGESTURE_FLAG_INERTIA
                  ? void setImmediate(function () {
                      t._gesture.stop();
                    })
                  : void (
                      (!y || Number(new Date()) - f > 500) &&
                      (e.preventDefault(),
                      !p &&
                        a.transitions &&
                        (a.vars.animationLoop ||
                          (m =
                            w /
                            ((0 === a.currentSlide && 0 > w) ||
                            (a.currentSlide === a.last && w > 0)
                              ? Math.abs(w) / c + 2
                              : 1)),
                        a.setProps(l + m, "setTouch")))
                    )
              );
            }
          }
          function i(e) {
            e.stopPropagation();
            var t = e.target._slider;
            if (t) {
              if (t.animatingTo === t.currentSlide && !y && null !== m) {
                var a = u ? -m : m,
                  n = t.getTarget(a > 0 ? "next" : "prev");
                t.canAdvance(n) &&
                ((Number(new Date()) - f < 550 && Math.abs(a) > 50) ||
                  Math.abs(a) > c / 2)
                  ? t.flexAnimate(n, t.vars.pauseOnAction)
                  : p ||
                    t.flexAnimate(t.currentSlide, t.vars.pauseOnAction, !0);
              }
              (s = null), (o = null), (m = null), (l = null), (w = 0);
            }
          }
          var s,
            o,
            l,
            c,
            m,
            f,
            g,
            h,
            S,
            y = !1,
            x = 0,
            b = 0,
            w = 0;
          r
            ? ((t.style.msTouchAction = "none"),
              (t._gesture = new MSGesture()),
              (t._gesture.target = t),
              t.addEventListener("MSPointerDown", e, !1),
              (t._slider = n),
              t.addEventListener("MSGestureChange", a, !1),
              t.addEventListener("MSGestureEnd", i, !1))
            : ((g = function (e) {
                n.animating
                  ? e.preventDefault()
                  : (window.navigator.msPointerEnabled ||
                      1 === e.touches.length) &&
                    (n.pause(),
                    (c = d ? n.h : n.w),
                    (f = Number(new Date())),
                    (x = e.touches[0].pageX),
                    (b = e.touches[0].pageY),
                    (l =
                      v && u && n.animatingTo === n.last
                        ? 0
                        : v && u
                        ? n.limit -
                          (n.itemW + n.vars.itemMargin) * n.move * n.animatingTo
                        : v && n.currentSlide === n.last
                        ? n.limit
                        : v
                        ? (n.itemW + n.vars.itemMargin) *
                          n.move *
                          n.currentSlide
                        : u
                        ? (n.last - n.currentSlide + n.cloneOffset) * c
                        : (n.currentSlide + n.cloneOffset) * c),
                    (s = d ? b : x),
                    (o = d ? x : b),
                    t.addEventListener("touchmove", h, !1),
                    t.addEventListener("touchend", S, !1));
              }),
              (h = function (e) {
                (x = e.touches[0].pageX),
                  (b = e.touches[0].pageY),
                  (m = d ? s - b : s - x),
                  (y = d
                    ? Math.abs(m) < Math.abs(x - o)
                    : Math.abs(m) < Math.abs(b - o));
                var t = 500;
                (!y || Number(new Date()) - f > t) &&
                  (e.preventDefault(),
                  !p &&
                    n.transitions &&
                    (n.vars.animationLoop ||
                      (m /=
                        (0 === n.currentSlide && 0 > m) ||
                        (n.currentSlide === n.last && m > 0)
                          ? Math.abs(m) / c + 2
                          : 1),
                    n.setProps(l + m, "setTouch")));
              }),
              (S = function (e) {
                if (
                  (t.removeEventListener("touchmove", h, !1),
                  n.animatingTo === n.currentSlide && !y && null !== m)
                ) {
                  var a = u ? -m : m,
                    i = n.getTarget(a > 0 ? "next" : "prev");
                  n.canAdvance(i) &&
                  ((Number(new Date()) - f < 550 && Math.abs(a) > 50) ||
                    Math.abs(a) > c / 2)
                    ? n.flexAnimate(i, n.vars.pauseOnAction)
                    : p ||
                      n.flexAnimate(n.currentSlide, n.vars.pauseOnAction, !0);
                }
                t.removeEventListener("touchend", S, !1),
                  (s = null),
                  (o = null),
                  (m = null),
                  (l = null);
              }),
              t.addEventListener("touchstart", g, !1));
        },
        resize: function () {
          !n.animating &&
            n.is(":visible") &&
            (v || n.doMath(),
            p
              ? f.smoothHeight()
              : v
              ? (n.slides.width(n.computedW),
                n.update(n.pagingCount),
                n.setProps())
              : d
              ? (n.viewport.height(n.h), n.setProps(n.h, "setTotal"))
              : (n.vars.smoothHeight && f.smoothHeight(),
                n.newSlides.width(n.computedW),
                n.setProps(n.computedW, "setTotal")));
        },
        smoothHeight: function (e) {
          if (!d || p) {
            var t = p ? n : n.viewport;
            e
              ? t.animate({ height: n.slides.eq(n.animatingTo).height() }, e)
              : t.height(n.slides.eq(n.animatingTo).height());
          }
        },
        sync: function (t) {
          var a = e(n.vars.sync).data("flexslider"),
            i = n.animatingTo;
          switch (t) {
            case "animate":
              a.flexAnimate(i, n.vars.pauseOnAction, !1, !0);
              break;
            case "play":
              a.playing || a.asNav || a.play();
              break;
            case "pause":
              a.pause();
          }
        },
        uniqueID: function (t) {
          return (
            t
              .filter("[id]")
              .add(t.find("[id]"))
              .each(function () {
                var t = e(this);
                t.attr("id", t.attr("id") + "_clone");
              }),
            t
          );
        },
        pauseInvisible: {
          visProp: null,
          init: function () {
            var e = f.pauseInvisible.getHiddenProp();
            if (e) {
              var t = e.replace(/[H|h]idden/, "") + "visibilitychange";
              document.addEventListener(t, function () {
                f.pauseInvisible.isHidden()
                  ? n.startTimeout
                    ? clearTimeout(n.startTimeout)
                    : n.pause()
                  : n.started
                  ? n.play()
                  : n.vars.initDelay > 0
                  ? setTimeout(n.play, n.vars.initDelay)
                  : n.play();
              });
            }
          },
          isHidden: function () {
            var e = f.pauseInvisible.getHiddenProp();
            return !!e && document[e];
          },
          getHiddenProp: function () {
            var e = ["webkit", "moz", "ms", "o"];
            if ("hidden" in document) return "hidden";
            for (var t = 0; t < e.length; t++)
              if (e[t] + "Hidden" in document) return e[t] + "Hidden";
            return null;
          },
        },
        setToClearWatchedEvent: function () {
          clearTimeout(i),
            (i = setTimeout(function () {
              c = "";
            }, 3e3));
        },
      }),
      (n.flexAnimate = function (t, a, i, r, l) {
        if (
          (n.vars.animationLoop ||
            t === n.currentSlide ||
            (n.direction = t > n.currentSlide ? "next" : "prev"),
          m &&
            1 === n.pagingCount &&
            (n.direction = n.currentItem < t ? "next" : "prev"),
          !n.animating && (n.canAdvance(t, l) || i) && n.is(":visible"))
        ) {
          if (m && r) {
            var c = e(n.vars.asNavFor).data("flexslider");
            if (
              ((n.atEnd = 0 === t || t === n.count - 1),
              c.flexAnimate(t, !0, !1, !0, l),
              (n.direction = n.currentItem < t ? "next" : "prev"),
              (c.direction = n.direction),
              Math.ceil((t + 1) / n.visible) - 1 === n.currentSlide || 0 === t)
            )
              return (
                (n.currentItem = t),
                n.slides
                  .removeClass(s + "active-slide")
                  .eq(t)
                  .addClass(s + "active-slide"),
                !1
              );
            (n.currentItem = t),
              n.slides
                .removeClass(s + "active-slide")
                .eq(t)
                .addClass(s + "active-slide"),
              (t = Math.floor(t / n.visible));
          }
          if (
            ((n.animating = !0),
            (n.animatingTo = t),
            a && n.pause(),
            n.vars.before(n),
            n.syncExists && !l && f.sync("animate"),
            n.vars.controlNav && f.controlNav.active(),
            v ||
              n.slides
                .removeClass(s + "active-slide")
                .eq(t)
                .addClass(s + "active-slide"),
            (n.atEnd = 0 === t || t === n.last),
            n.vars.directionNav && f.directionNav.update(),
            t === n.last && (n.vars.end(n), n.vars.animationLoop || n.pause()),
            p)
          )
            o
              ? (n.slides.eq(n.currentSlide).css({ opacity: 0, zIndex: 1 }),
                n.slides.eq(t).css({ opacity: 1, zIndex: 2 }),
                n.wrapup(y))
              : (n.slides
                  .eq(n.currentSlide)
                  .css({ zIndex: 1 })
                  .animate(
                    { opacity: 0 },
                    n.vars.animationSpeed,
                    n.vars.easing
                  ),
                n.slides
                  .eq(t)
                  .css({ zIndex: 2 })
                  .animate(
                    { opacity: 1 },
                    n.vars.animationSpeed,
                    n.vars.easing,
                    n.wrapup
                  ));
          else {
            var g,
              h,
              S,
              y = d ? n.slides.filter(":first").height() : n.computedW;
            v
              ? ((g = n.vars.itemMargin),
                (S = (n.itemW + g) * n.move * n.animatingTo),
                (h = S > n.limit && 1 !== n.visible ? n.limit : S))
              : (h =
                  0 === n.currentSlide &&
                  t === n.count - 1 &&
                  n.vars.animationLoop &&
                  "next" !== n.direction
                    ? u
                      ? (n.count + n.cloneOffset) * y
                      : 0
                    : n.currentSlide === n.last &&
                      0 === t &&
                      n.vars.animationLoop &&
                      "prev" !== n.direction
                    ? u
                      ? 0
                      : (n.count + 1) * y
                    : u
                    ? (n.count - 1 - t + n.cloneOffset) * y
                    : (t + n.cloneOffset) * y),
              n.setProps(h, "", n.vars.animationSpeed),
              n.transitions
                ? ((n.vars.animationLoop && n.atEnd) ||
                    ((n.animating = !1), (n.currentSlide = n.animatingTo)),
                  n.container.unbind("webkitTransitionEnd transitionend"),
                  n.container.bind(
                    "webkitTransitionEnd transitionend",
                    function () {
                      clearTimeout(n.ensureAnimationEnd), n.wrapup(y);
                    }
                  ),
                  clearTimeout(n.ensureAnimationEnd),
                  (n.ensureAnimationEnd = setTimeout(function () {
                    n.wrapup(y);
                  }, n.vars.animationSpeed + 100)))
                : n.container.animate(
                    n.args,
                    n.vars.animationSpeed,
                    n.vars.easing,
                    function () {
                      n.wrapup(y);
                    }
                  );
          }
          n.vars.smoothHeight && f.smoothHeight(n.vars.animationSpeed);
        }
      }),
      (n.wrapup = function (e) {
        p ||
          v ||
          (0 === n.currentSlide &&
          n.animatingTo === n.last &&
          n.vars.animationLoop
            ? n.setProps(e, "jumpEnd")
            : n.currentSlide === n.last &&
              0 === n.animatingTo &&
              n.vars.animationLoop &&
              n.setProps(e, "jumpStart")),
          (n.animating = !1),
          (n.currentSlide = n.animatingTo),
          n.vars.after(n);
      }),
      (n.animateSlides = function () {
        !n.animating && g && n.flexAnimate(n.getTarget("next"));
      }),
      (n.pause = function () {
        clearInterval(n.animatedSlides),
          (n.animatedSlides = null),
          (n.playing = !1),
          n.vars.pausePlay && f.pausePlay.update("play"),
          n.syncExists && f.sync("pause");
      }),
      (n.play = function () {
        n.playing && clearInterval(n.animatedSlides),
          (n.animatedSlides =
            n.animatedSlides ||
            setInterval(n.animateSlides, n.vars.slideshowSpeed)),
          (n.started = n.playing = !0),
          n.vars.pausePlay && f.pausePlay.update("pause"),
          n.syncExists && f.sync("play");
      }),
      (n.stop = function () {
        n.pause(), (n.stopped = !0);
      }),
      (n.canAdvance = function (e, t) {
        var a = m ? n.pagingCount - 1 : n.last;
        return (
          !!t ||
          !(
            !m ||
            n.currentItem !== n.count - 1 ||
            0 !== e ||
            "prev" !== n.direction
          ) ||
          ((!m ||
            0 !== n.currentItem ||
            e !== n.pagingCount - 1 ||
            "next" === n.direction) &&
            !(e === n.currentSlide && !m) &&
            (!!n.vars.animationLoop ||
              ((!n.atEnd ||
                0 !== n.currentSlide ||
                e !== a ||
                "next" === n.direction) &&
                (!n.atEnd ||
                  n.currentSlide !== a ||
                  0 !== e ||
                  "next" !== n.direction))))
        );
      }),
      (n.getTarget = function (e) {
        return (
          (n.direction = e),
          "next" === e
            ? n.currentSlide === n.last
              ? 0
              : n.currentSlide + 1
            : 0 === n.currentSlide
            ? n.last
            : n.currentSlide - 1
        );
      }),
      (n.setProps = function (e, t, a) {
        var i = (function () {
          var a = e
              ? e
              : (n.itemW + n.vars.itemMargin) * n.move * n.animatingTo,
            i = (function () {
              if (v)
                return "setTouch" === t
                  ? e
                  : u && n.animatingTo === n.last
                  ? 0
                  : u
                  ? n.limit -
                    (n.itemW + n.vars.itemMargin) * n.move * n.animatingTo
                  : n.animatingTo === n.last
                  ? n.limit
                  : a;
              switch (t) {
                case "setTotal":
                  return u
                    ? (n.count - 1 - n.currentSlide + n.cloneOffset) * e
                    : (n.currentSlide + n.cloneOffset) * e;
                case "setTouch":
                  return u ? e : e;
                case "jumpEnd":
                  return u ? e : n.count * e;
                case "jumpStart":
                  return u ? n.count * e : e;
                default:
                  return e;
              }
            })();
          return -1 * i + "px";
        })();
        n.transitions &&
          ((i = d
            ? "translate3d(0," + i + ",0)"
            : "translate3d(" + i + ",0,0)"),
          (a = void 0 !== a ? a / 1e3 + "s" : "0s"),
          n.container.css("-" + n.pfx + "-transition-duration", a),
          n.container.css("transition-duration", a)),
          (n.args[n.prop] = i),
          (n.transitions || void 0 === a) && n.container.css(n.args),
          n.container.css("transform", i);
      }),
      (n.setup = function (t) {
        if (p)
          n.slides.css({
            width: "100%",
            float: "left",
            marginRight: "-100%",
            position: "relative",
          }),
            "init" === t &&
              (o
                ? n.slides
                    .css({
                      opacity: 0,
                      display: "block",
                      webkitTransition:
                        "opacity " + n.vars.animationSpeed / 1e3 + "s ease",
                      zIndex: 1,
                    })
                    .eq(n.currentSlide)
                    .css({ opacity: 1, zIndex: 2 })
                : 0 == n.vars.fadeFirstSlide
                ? n.slides
                    .css({ opacity: 0, display: "block", zIndex: 1 })
                    .eq(n.currentSlide)
                    .css({ zIndex: 2 })
                    .css({ opacity: 1 })
                : n.slides
                    .css({ opacity: 0, display: "block", zIndex: 1 })
                    .eq(n.currentSlide)
                    .css({ zIndex: 2 })
                    .animate(
                      { opacity: 1 },
                      n.vars.animationSpeed,
                      n.vars.easing
                    )),
            n.vars.smoothHeight && f.smoothHeight();
        else {
          var a, i;
          "init" === t &&
            ((n.viewport = e('<div class="' + s + 'viewport"></div>')
              .css({ overflow: "hidden", position: "relative" })
              .appendTo(n)
              .append(n.container)),
            (n.cloneCount = 0),
            (n.cloneOffset = 0),
            u &&
              ((i = e.makeArray(n.slides).reverse()),
              (n.slides = e(i)),
              n.container.empty().append(n.slides))),
            n.vars.animationLoop &&
              !v &&
              ((n.cloneCount = 2),
              (n.cloneOffset = 1),
              "init" !== t && n.container.find(".clone").remove(),
              n.container
                .append(
                  f
                    .uniqueID(n.slides.first().clone().addClass("clone"))
                    .attr("aria-hidden", "true")
                )
                .prepend(
                  f
                    .uniqueID(n.slides.last().clone().addClass("clone"))
                    .attr("aria-hidden", "true")
                )),
            (n.newSlides = e(n.vars.selector, n)),
            (a = u
              ? n.count - 1 - n.currentSlide + n.cloneOffset
              : n.currentSlide + n.cloneOffset),
            d && !v
              ? (n.container
                  .height(200 * (n.count + n.cloneCount) + "%")
                  .css("position", "absolute")
                  .width("100%"),
                setTimeout(
                  function () {
                    n.newSlides.css({ display: "block" }),
                      n.doMath(),
                      n.viewport.height(n.h),
                      n.setProps(a * n.h, "init");
                  },
                  "init" === t ? 100 : 0
                ))
              : (n.container.width(200 * (n.count + n.cloneCount) + "%"),
                n.setProps(a * n.computedW, "init"),
                setTimeout(
                  function () {
                    n.doMath(),
                      n.newSlides.css({
                        width: n.computedW,
                        float: "left",
                        display: "block",
                      }),
                      n.vars.smoothHeight && f.smoothHeight();
                  },
                  "init" === t ? 100 : 0
                ));
        }
        v ||
          n.slides
            .removeClass(s + "active-slide")
            .eq(n.currentSlide)
            .addClass(s + "active-slide"),
          n.vars.init(n);
      }),
      (n.doMath = function () {
        var e = n.slides.first(),
          t = n.vars.itemMargin,
          a = n.vars.minItems,
          i = n.vars.maxItems;
        (n.w = void 0 === n.viewport ? n.width() : n.viewport.width()),
          (n.h = e.height()),
          (n.boxPadding = e.outerWidth() - e.width()),
          v
            ? ((n.itemT = n.vars.itemWidth + t),
              (n.minW = a ? a * n.itemT : n.w),
              (n.maxW = i ? i * n.itemT - t : n.w),
              (n.itemW =
                n.minW > n.w
                  ? (n.w - t * (a - 1)) / a
                  : n.maxW < n.w
                  ? (n.w - t * (i - 1)) / i
                  : n.vars.itemWidth > n.w
                  ? n.w
                  : n.vars.itemWidth),
              (n.visible = Math.floor(n.w / n.itemW)),
              (n.move =
                n.vars.move > 0 && n.vars.move < n.visible
                  ? n.vars.move
                  : n.visible),
              (n.pagingCount = Math.ceil((n.count - n.visible) / n.move + 1)),
              (n.last = n.pagingCount - 1),
              (n.limit =
                1 === n.pagingCount
                  ? 0
                  : n.vars.itemWidth > n.w
                  ? n.itemW * (n.count - 1) + t * (n.count - 1)
                  : (n.itemW + t) * n.count - n.w - t))
            : ((n.itemW = n.w),
              (n.pagingCount = n.count),
              (n.last = n.count - 1)),
          (n.computedW = n.itemW - n.boxPadding);
      }),
      (n.update = function (e, t) {
        n.doMath(),
          v ||
            (e < n.currentSlide
              ? (n.currentSlide += 1)
              : e <= n.currentSlide && 0 !== e && (n.currentSlide -= 1),
            (n.animatingTo = n.currentSlide)),
          n.vars.controlNav &&
            !n.manualControls &&
            (("add" === t && !v) || n.pagingCount > n.controlNav.length
              ? f.controlNav.update("add")
              : (("remove" === t && !v) ||
                  n.pagingCount < n.controlNav.length) &&
                (v &&
                  n.currentSlide > n.last &&
                  ((n.currentSlide -= 1), (n.animatingTo -= 1)),
                f.controlNav.update("remove", n.last))),
          n.vars.directionNav && f.directionNav.update();
      }),
      (n.addSlide = function (t, a) {
        var i = e(t);
        (n.count += 1),
          (n.last = n.count - 1),
          d && u
            ? void 0 !== a
              ? n.slides.eq(n.count - a).after(i)
              : n.container.prepend(i)
            : void 0 !== a
            ? n.slides.eq(a).before(i)
            : n.container.append(i),
          n.update(a, "add"),
          (n.slides = e(n.vars.selector + ":not(.clone)", n)),
          n.setup(),
          n.vars.added(n);
      }),
      (n.removeSlide = function (t) {
        var a = isNaN(t) ? n.slides.index(e(t)) : t;
        (n.count -= 1),
          (n.last = n.count - 1),
          isNaN(t)
            ? e(t, n.slides).remove()
            : d && u
            ? n.slides.eq(n.last).remove()
            : n.slides.eq(t).remove(),
          n.doMath(),
          n.update(a, "remove"),
          (n.slides = e(n.vars.selector + ":not(.clone)", n)),
          n.setup(),
          n.vars.removed(n);
      }),
      f.init();
  }),
    e(window)
      .blur(function (e) {
        focused = !1;
      })
      .focus(function (e) {
        focused = !0;
      }),
    (e.flexslider.defaults = {
      namespace: "flex-",
      selector: ".slides > li",
      animation: "fade",
      easing: "swing",
      direction: "horizontal",
      reverse: !1,
      animationLoop: !0,
      smoothHeight: !1,
      startAt: 0,
      slideshow: !0,
      slideshowSpeed: 7e3,
      animationSpeed: 600,
      initDelay: 0,
      randomize: !1,
      fadeFirstSlide: !0,
      thumbCaptions: !1,
      pauseOnAction: !0,
      pauseOnHover: !1,
      pauseInvisible: !0,
      useCSS: !0,
      touch: !0,
      video: !1,
      controlNav: !0,
      directionNav: !0,
      prevText: "Previous",
      nextText: "Next",
      keyboard: !0,
      multipleKeyboard: !1,
      mousewheel: !1,
      pausePlay: !1,
      pauseText: "Pause",
      playText: "Play",
      controlsContainer: "",
      manualControls: "",
      customDirectionNav: "",
      sync: "",
      asNavFor: "",
      itemWidth: 0,
      itemMargin: 0,
      minItems: 1,
      maxItems: 0,
      move: 0,
      allowOneSlide: !0,
      start: function () {},
      before: function () {},
      after: function () {},
      end: function () {},
      added: function () {},
      removed: function () {},
      init: function () {},
    }),
    (e.fn.flexslider = function (t) {
      if ((void 0 === t && (t = {}), "object" == typeof t))
        return this.each(function () {
          var a = e(this),
            n = t.selector ? t.selector : ".slides > li",
            i = a.find(n);
          (1 === i.length && t.allowOneSlide === !0) || 0 === i.length
            ? (i.fadeIn(400), t.start && t.start(a))
            : void 0 === a.data("flexslider") && new e.flexslider(this, t);
        });
      var a = e(this).data("flexslider");
      switch (t) {
        case "play":
          a.play();
          break;
        case "pause":
          a.pause();
          break;
        case "stop":
          a.stop();
          break;
        case "next":
          a.flexAnimate(a.getTarget("next"), !0);
          break;
        case "prev":
        case "previous":
          a.flexAnimate(a.getTarget("prev"), !0);
          break;
        default:
          "number" == typeof t && a.flexAnimate(t, !0);
      }
    });
})(jQuery);
!(function (t) {
  var e = -1,
    o = -1,
    a = function (e) {
      var o = null,
        a = [];
      return (
        t(e).each(function () {
          var e = t(this),
            i = e.offset().top - n(e.css("margin-top")),
            r = 0 < a.length ? a[a.length - 1] : null;
          null === r
            ? a.push(e)
            : 1 >= Math.floor(Math.abs(o - i))
            ? (a[a.length - 1] = r.add(e))
            : a.push(e),
            (o = i);
        }),
        a
      );
    },
    n = function (t) {
      return parseFloat(t) || 0;
    },
    i = function (e) {
      var o = { byRow: !0, remove: !1, property: "height" };
      return "object" == typeof e
        ? t.extend(o, e)
        : ("boolean" == typeof e
            ? (o.byRow = e)
            : "remove" === e && (o.remove = !0),
          o);
    },
    r = (t.fn.matchHeight = function (e) {
      if (((e = i(e)), e.remove)) {
        var o = this;
        return (
          this.css(e.property, ""),
          t.each(r._groups, function (t, e) {
            e.elements = e.elements.not(o);
          }),
          this
        );
      }
      return 1 >= this.length
        ? this
        : (r._groups.push({ elements: this, options: e }),
          r._apply(this, e),
          this);
    });
  (r._groups = []),
    (r._throttle = 80),
    (r._maintainScroll = !1),
    (r._beforeUpdate = null),
    (r._afterUpdate = null),
    (r._apply = function (e, o) {
      var s = i(o),
        h = t(e),
        c = [h],
        l = t(window).scrollTop(),
        p = t("html").outerHeight(!0),
        d = h.parents().filter(":hidden");
      return (
        d.each(function () {
          var e = t(this);
          e.data("style-cache", e.attr("style"));
        }),
        d.css("display", "block"),
        s.byRow &&
          (h.each(function () {
            var e = t(this),
              o =
                "inline-block" === e.css("display") ? "inline-block" : "block";
            e.data("style-cache", e.attr("style")),
              e.css({
                display: o,
                "padding-top": "0",
                "padding-bottom": "0",
                "margin-top": "0",
                "margin-bottom": "0",
                "border-top-width": "0",
                "border-bottom-width": "0",
                height: "100px",
              });
          }),
          (c = a(h)),
          h.each(function () {
            var e = t(this);
            e.attr("style", e.data("style-cache") || "");
          })),
        t.each(c, function (e, o) {
          var a = t(o),
            i = 0;
          s.byRow && 1 >= a.length
            ? a.css(s.property, "")
            : (a.each(function () {
                var e = t(this),
                  o = {
                    display:
                      "inline-block" === e.css("display")
                        ? "inline-block"
                        : "block",
                  };
                (o[s.property] = ""),
                  e.css(o),
                  e.outerHeight(!1) > i && (i = e.outerHeight(!1)),
                  e.css("display", "");
              }),
              a.each(function () {
                var e = t(this),
                  o = 0;
                "border-box" !== e.css("box-sizing") &&
                  ((o +=
                    n(e.css("border-top-width")) +
                    n(e.css("border-bottom-width"))),
                  (o += n(e.css("padding-top")) + n(e.css("padding-bottom")))),
                  e.css(s.property, i - o);
              }));
        }),
        d.each(function () {
          var e = t(this);
          e.attr("style", e.data("style-cache") || null);
        }),
        r._maintainScroll &&
          t(window).scrollTop((l / p) * t("html").outerHeight(!0)),
        this
      );
    }),
    (r._applyDataApi = function () {
      var e = {};
      t("[data-match-height], [data-mh]").each(function () {
        var o = t(this),
          a = o.attr("data-match-height") || o.attr("data-mh");
        e[a] = a in e ? e[a].add(o) : o;
      }),
        t.each(e, function () {
          this.matchHeight(!0);
        });
    });
  var s = function (e) {
    r._beforeUpdate && r._beforeUpdate(e, r._groups),
      t.each(r._groups, function () {
        r._apply(this.elements, this.options);
      }),
      r._afterUpdate && r._afterUpdate(e, r._groups);
  };
  (r._update = function (a, n) {
    if (n && "resize" === n.type) {
      var i = t(window).width();
      if (i === e) return;
      e = i;
    }
    a
      ? -1 === o &&
        (o = setTimeout(function () {
          s(n), (o = -1);
        }, r._throttle))
      : s(n);
  }),
    t(r._applyDataApi),
    t(window).bind("load", function (t) {
      r._update(!1, t);
    }),
    t(window).bind("resize orientationchange", function (t) {
      r._update(!0, t);
    });
})(jQuery);
!(function (t, e, i, s) {
  function o(e, i) {
    (this.element = e),
      (this.options = t.extend({}, r, i)),
      (this._defaults = r),
      (this._name = n),
      this.init();
  }
  var n = "stellar",
    r = {
      scrollProperty: "scroll",
      positionProperty: "position",
      horizontalScrolling: !0,
      verticalScrolling: !0,
      horizontalOffset: 0,
      verticalOffset: 0,
      responsive: !1,
      parallaxBackgrounds: !0,
      parallaxElements: !0,
      hideDistantElements: !0,
      hideElement: function (t) {
        t.hide();
      },
      showElement: function (t) {
        t.show();
      },
    },
    a = {
      scroll: {
        getLeft: function (t) {
          return t.scrollLeft();
        },
        setLeft: function (t, e) {
          t.scrollLeft(e);
        },
        getTop: function (t) {
          return t.scrollTop();
        },
        setTop: function (t, e) {
          t.scrollTop(e);
        },
      },
      position: {
        getLeft: function (t) {
          return -1 * parseInt(t.css("left"), 10);
        },
        getTop: function (t) {
          return -1 * parseInt(t.css("top"), 10);
        },
      },
      margin: {
        getLeft: function (t) {
          return -1 * parseInt(t.css("margin-left"), 10);
        },
        getTop: function (t) {
          return -1 * parseInt(t.css("margin-top"), 10);
        },
      },
      transform: {
        getLeft: function (t) {
          var e = getComputedStyle(t[0])[c];
          return "none" !== e
            ? -1 * parseInt(e.match(/(-?[0-9]+)/g)[4], 10)
            : 0;
        },
        getTop: function (t) {
          var e = getComputedStyle(t[0])[c];
          return "none" !== e
            ? -1 * parseInt(e.match(/(-?[0-9]+)/g)[5], 10)
            : 0;
        },
      },
    },
    l = {
      position: {
        setLeft: function (t, e) {
          t.css("left", e);
        },
        setTop: function (t, e) {
          t.css("top", e);
        },
      },
      transform: {
        setPosition: function (t, e, i, s, o) {
          t[0].style[c] =
            "translate3d(" + (e - i) + "px, " + (s - o) + "px, 0)";
        },
      },
    },
    f = (function () {
      var e,
        i = /^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,
        s = t("script")[0].style,
        o = "";
      for (e in s)
        if (i.test(e)) {
          o = e.match(i)[0];
          break;
        }
      return (
        "WebkitOpacity" in s && (o = "Webkit"),
        "KhtmlOpacity" in s && (o = "Khtml"),
        function (t) {
          return (
            o + (o.length > 0 ? t.charAt(0).toUpperCase() + t.slice(1) : t)
          );
        }
      );
    })(),
    c = f("transform"),
    h =
      t("<div />", { style: "background:#fff" }).css(
        "background-position-x"
      ) !== s,
    p = h
      ? function (t, e, i) {
          t.css({ "background-position-x": e, "background-position-y": i });
        }
      : function (t, e, i) {
          t.css("background-position", e + " " + i);
        },
    d = h
      ? function (t) {
          return [
            t.css("background-position-x"),
            t.css("background-position-y"),
          ];
        }
      : function (t) {
          return t.css("background-position").split(" ");
        },
    u =
      e.requestAnimationFrame ||
      e.webkitRequestAnimationFrame ||
      e.mozRequestAnimationFrame ||
      e.oRequestAnimationFrame ||
      e.msRequestAnimationFrame ||
      function (t) {
        setTimeout(t, 1e3 / 60);
      };
  (o.prototype = {
    init: function () {
      (this.options.name = n + "_" + Math.floor(1e9 * Math.random())),
        this._defineElements(),
        this._defineGetters(),
        this._defineSetters(),
        this._handleWindowLoadAndResize(),
        this._detectViewport(),
        this.refresh({ firstLoad: !0 }),
        "scroll" === this.options.scrollProperty
          ? this._handleScrollEvent()
          : this._startAnimationLoop();
    },
    _defineElements: function () {
      this.element === i.body && (this.element = e),
        (this.$scrollElement = t(this.element)),
        (this.$element = this.element === e ? t("body") : this.$scrollElement),
        (this.$viewportElement =
          this.options.viewportElement !== s
            ? t(this.options.viewportElement)
            : this.$scrollElement[0] === e ||
              "scroll" === this.options.scrollProperty
            ? this.$scrollElement
            : this.$scrollElement.parent());
    },
    _defineGetters: function () {
      var t = this,
        e = a[t.options.scrollProperty];
      (this._getScrollLeft = function () {
        return e.getLeft(t.$scrollElement);
      }),
        (this._getScrollTop = function () {
          return e.getTop(t.$scrollElement);
        });
    },
    _defineSetters: function () {
      var e = this,
        i = a[e.options.scrollProperty],
        s = l[e.options.positionProperty],
        o = i.setLeft,
        n = i.setTop;
      (this._setScrollLeft =
        "function" == typeof o
          ? function (t) {
              o(e.$scrollElement, t);
            }
          : t.noop),
        (this._setScrollTop =
          "function" == typeof n
            ? function (t) {
                n(e.$scrollElement, t);
              }
            : t.noop),
        (this._setPosition =
          s.setPosition ||
          function (t, i, o, n, r) {
            e.options.horizontalScrolling && s.setLeft(t, i, o),
              e.options.verticalScrolling && s.setTop(t, n, r);
          });
    },
    _handleWindowLoadAndResize: function () {
      var i = this,
        s = t(e);
      i.options.responsive &&
        s.bind("load." + this.name, function () {
          i.refresh();
        }),
        s.bind("resize." + this.name, function () {
          i._detectViewport(), i.options.responsive && i.refresh();
        });
    },
    refresh: function (i) {
      var s = this,
        o = s._getScrollLeft(),
        n = s._getScrollTop();
      (i && i.firstLoad) || this._reset(),
        this._setScrollLeft(0),
        this._setScrollTop(0),
        this._setOffsets(),
        this._findParticles(),
        this._findBackgrounds(),
        i &&
          i.firstLoad &&
          /WebKit/.test(navigator.userAgent) &&
          t(e).load(function () {
            var t = s._getScrollLeft(),
              e = s._getScrollTop();
            s._setScrollLeft(t + 1),
              s._setScrollTop(e + 1),
              s._setScrollLeft(t),
              s._setScrollTop(e);
          }),
        this._setScrollLeft(o),
        this._setScrollTop(n);
    },
    _detectViewport: function () {
      var t = this.$viewportElement.offset(),
        e = null !== t && t !== s;
      (this.viewportWidth = this.$viewportElement.width()),
        (this.viewportHeight = this.$viewportElement.height()),
        (this.viewportOffsetTop = e ? t.top : 0),
        (this.viewportOffsetLeft = e ? t.left : 0);
    },
    _findParticles: function () {
      var e = this;
      if ((this._getScrollLeft(), this._getScrollTop(), this.particles !== s))
        for (var i = this.particles.length - 1; i >= 0; i--)
          this.particles[i].$element.data("stellar-elementIsActive", s);
      (this.particles = []),
        this.options.parallaxElements &&
          this.$element.find("[data-stellar-ratio]").each(function () {
            var i,
              o,
              n,
              r,
              a,
              l,
              f,
              c,
              h,
              p = t(this),
              d = 0,
              u = 0,
              g = 0,
              m = 0;
            if (p.data("stellar-elementIsActive")) {
              if (p.data("stellar-elementIsActive") !== this) return;
            } else p.data("stellar-elementIsActive", this);
            e.options.showElement(p),
              p.data("stellar-startingLeft")
                ? (p.css("left", p.data("stellar-startingLeft")),
                  p.css("top", p.data("stellar-startingTop")))
                : (p.data("stellar-startingLeft", p.css("left")),
                  p.data("stellar-startingTop", p.css("top"))),
              (n = p.position().left),
              (r = p.position().top),
              (a =
                "auto" === p.css("margin-left")
                  ? 0
                  : parseInt(p.css("margin-left"), 10)),
              (l =
                "auto" === p.css("margin-top")
                  ? 0
                  : parseInt(p.css("margin-top"), 10)),
              (c = p.offset().left - a),
              (h = p.offset().top - l),
              p.parents().each(function () {
                var e = t(this);
                return e.data("stellar-offset-parent") === !0
                  ? ((d = g), (u = m), (f = e), !1)
                  : ((g += e.position().left), void (m += e.position().top));
              }),
              (i =
                p.data("stellar-horizontal-offset") !== s
                  ? p.data("stellar-horizontal-offset")
                  : f !== s && f.data("stellar-horizontal-offset") !== s
                  ? f.data("stellar-horizontal-offset")
                  : e.horizontalOffset),
              (o =
                p.data("stellar-vertical-offset") !== s
                  ? p.data("stellar-vertical-offset")
                  : f !== s && f.data("stellar-vertical-offset") !== s
                  ? f.data("stellar-vertical-offset")
                  : e.verticalOffset),
              e.particles.push({
                $element: p,
                $offsetParent: f,
                isFixed: "fixed" === p.css("position"),
                horizontalOffset: i,
                verticalOffset: o,
                startingPositionLeft: n,
                startingPositionTop: r,
                startingOffsetLeft: c,
                startingOffsetTop: h,
                parentOffsetLeft: d,
                parentOffsetTop: u,
                stellarRatio:
                  p.data("stellar-ratio") !== s ? p.data("stellar-ratio") : 1,
                width: p.outerWidth(!0),
                height: p.outerHeight(!0),
                isHidden: !1,
              });
          });
    },
    _findBackgrounds: function () {
      var e,
        i = this,
        o = this._getScrollLeft(),
        n = this._getScrollTop();
      (this.backgrounds = []),
        this.options.parallaxBackgrounds &&
          ((e = this.$element.find("[data-stellar-background-ratio]")),
          this.$element.data("stellar-background-ratio") &&
            (e = e.add(this.$element)),
          e.each(function () {
            var e,
              r,
              a,
              l,
              f,
              c,
              h,
              u = t(this),
              g = d(u),
              m = 0,
              v = 0,
              L = 0,
              _ = 0;
            if (u.data("stellar-backgroundIsActive")) {
              if (u.data("stellar-backgroundIsActive") !== this) return;
            } else u.data("stellar-backgroundIsActive", this);
            u.data("stellar-backgroundStartingLeft")
              ? p(
                  u,
                  u.data("stellar-backgroundStartingLeft"),
                  u.data("stellar-backgroundStartingTop")
                )
              : (u.data("stellar-backgroundStartingLeft", g[0]),
                u.data("stellar-backgroundStartingTop", g[1])),
              (a =
                "auto" === u.css("margin-left")
                  ? 0
                  : parseInt(u.css("margin-left"), 10)),
              (l =
                "auto" === u.css("margin-top")
                  ? 0
                  : parseInt(u.css("margin-top"), 10)),
              (f = u.offset().left - a - o),
              (c = u.offset().top - l - n),
              u.parents().each(function () {
                var e = t(this);
                return e.data("stellar-offset-parent") === !0
                  ? ((m = L), (v = _), (h = e), !1)
                  : ((L += e.position().left), void (_ += e.position().top));
              }),
              (e =
                u.data("stellar-horizontal-offset") !== s
                  ? u.data("stellar-horizontal-offset")
                  : h !== s && h.data("stellar-horizontal-offset") !== s
                  ? h.data("stellar-horizontal-offset")
                  : i.horizontalOffset),
              (r =
                u.data("stellar-vertical-offset") !== s
                  ? u.data("stellar-vertical-offset")
                  : h !== s && h.data("stellar-vertical-offset") !== s
                  ? h.data("stellar-vertical-offset")
                  : i.verticalOffset),
              i.backgrounds.push({
                $element: u,
                $offsetParent: h,
                isFixed: "fixed" === u.css("background-attachment"),
                horizontalOffset: e,
                verticalOffset: r,
                startingValueLeft: g[0],
                startingValueTop: g[1],
                startingBackgroundPositionLeft: isNaN(parseInt(g[0], 10))
                  ? 0
                  : parseInt(g[0], 10),
                startingBackgroundPositionTop: isNaN(parseInt(g[1], 10))
                  ? 0
                  : parseInt(g[1], 10),
                startingPositionLeft: u.position().left,
                startingPositionTop: u.position().top,
                startingOffsetLeft: f,
                startingOffsetTop: c,
                parentOffsetLeft: m,
                parentOffsetTop: v,
                stellarRatio:
                  u.data("stellar-background-ratio") === s
                    ? 1
                    : u.data("stellar-background-ratio"),
              });
          }));
    },
    _reset: function () {
      var t, e, i, s, o;
      for (o = this.particles.length - 1; o >= 0; o--)
        (t = this.particles[o]),
          (e = t.$element.data("stellar-startingLeft")),
          (i = t.$element.data("stellar-startingTop")),
          this._setPosition(t.$element, e, e, i, i),
          this.options.showElement(t.$element),
          t.$element
            .data("stellar-startingLeft", null)
            .data("stellar-elementIsActive", null)
            .data("stellar-backgroundIsActive", null);
      for (o = this.backgrounds.length - 1; o >= 0; o--)
        (s = this.backgrounds[o]),
          s.$element
            .data("stellar-backgroundStartingLeft", null)
            .data("stellar-backgroundStartingTop", null),
          p(s.$element, s.startingValueLeft, s.startingValueTop);
    },
    destroy: function () {
      this._reset(),
        this.$scrollElement
          .unbind("resize." + this.name)
          .unbind("scroll." + this.name),
        (this._animationLoop = t.noop),
        t(e)
          .unbind("load." + this.name)
          .unbind("resize." + this.name);
    },
    _setOffsets: function () {
      var i = this,
        s = t(e);
      s
        .unbind("resize.horizontal-" + this.name)
        .unbind("resize.vertical-" + this.name),
        "function" == typeof this.options.horizontalOffset
          ? ((this.horizontalOffset = this.options.horizontalOffset()),
            s.bind("resize.horizontal-" + this.name, function () {
              i.horizontalOffset = i.options.horizontalOffset();
            }))
          : (this.horizontalOffset = this.options.horizontalOffset),
        "function" == typeof this.options.verticalOffset
          ? ((this.verticalOffset = this.options.verticalOffset()),
            s.bind("resize.vertical-" + this.name, function () {
              i.verticalOffset = i.options.verticalOffset();
            }))
          : (this.verticalOffset = this.options.verticalOffset);
    },
    _repositionElements: function () {
      var t,
        e,
        i,
        s,
        o,
        n,
        r,
        a,
        l,
        f,
        c = this._getScrollLeft(),
        h = this._getScrollTop(),
        d = !0,
        u = !0;
      if (
        this.currentScrollLeft !== c ||
        this.currentScrollTop !== h ||
        this.currentWidth !== this.viewportWidth ||
        this.currentHeight !== this.viewportHeight
      ) {
        for (
          this.currentScrollLeft = c,
            this.currentScrollTop = h,
            this.currentWidth = this.viewportWidth,
            this.currentHeight = this.viewportHeight,
            f = this.particles.length - 1;
          f >= 0;
          f--
        )
          (t = this.particles[f]),
            (e = t.isFixed ? 1 : 0),
            this.options.horizontalScrolling
              ? ((n =
                  (c +
                    t.horizontalOffset +
                    this.viewportOffsetLeft +
                    t.startingPositionLeft -
                    t.startingOffsetLeft +
                    t.parentOffsetLeft) *
                    -(t.stellarRatio + e - 1) +
                  t.startingPositionLeft),
                (a = n - t.startingPositionLeft + t.startingOffsetLeft))
              : ((n = t.startingPositionLeft), (a = t.startingOffsetLeft)),
            this.options.verticalScrolling
              ? ((r =
                  (h +
                    t.verticalOffset +
                    this.viewportOffsetTop +
                    t.startingPositionTop -
                    t.startingOffsetTop +
                    t.parentOffsetTop) *
                    -(t.stellarRatio + e - 1) +
                  t.startingPositionTop),
                (l = r - t.startingPositionTop + t.startingOffsetTop))
              : ((r = t.startingPositionTop), (l = t.startingOffsetTop)),
            this.options.hideDistantElements &&
              ((u =
                !this.options.horizontalScrolling ||
                (a + t.width > (t.isFixed ? 0 : c) &&
                  a <
                    (t.isFixed ? 0 : c) +
                      this.viewportWidth +
                      this.viewportOffsetLeft)),
              (d =
                !this.options.verticalScrolling ||
                (l + t.height > (t.isFixed ? 0 : h) &&
                  l <
                    (t.isFixed ? 0 : h) +
                      this.viewportHeight +
                      this.viewportOffsetTop))),
            u && d
              ? (t.isHidden &&
                  (this.options.showElement(t.$element), (t.isHidden = !1)),
                this._setPosition(
                  t.$element,
                  n,
                  t.startingPositionLeft,
                  r,
                  t.startingPositionTop
                ))
              : t.isHidden ||
                (this.options.hideElement(t.$element), (t.isHidden = !0));
        for (f = this.backgrounds.length - 1; f >= 0; f--)
          (i = this.backgrounds[f]),
            (e = i.isFixed ? 0 : 1),
            (s = this.options.horizontalScrolling
              ? (c +
                  i.horizontalOffset -
                  this.viewportOffsetLeft -
                  i.startingOffsetLeft +
                  i.parentOffsetLeft -
                  i.startingBackgroundPositionLeft) *
                  (e - i.stellarRatio) +
                "px"
              : i.startingValueLeft),
            (o = this.options.verticalScrolling
              ? (h +
                  i.verticalOffset -
                  this.viewportOffsetTop -
                  i.startingOffsetTop +
                  i.parentOffsetTop -
                  i.startingBackgroundPositionTop) *
                  (e - i.stellarRatio) +
                "px"
              : i.startingValueTop),
            p(i.$element, s, o);
      }
    },
    _handleScrollEvent: function () {
      var t = this,
        e = !1,
        i = function () {
          t._repositionElements(), (e = !1);
        },
        s = function () {
          e || (u(i), (e = !0));
        };
      this.$scrollElement.bind("scroll." + this.name, s), s();
    },
    _startAnimationLoop: function () {
      var t = this;
      (this._animationLoop = function () {
        u(t._animationLoop), t._repositionElements();
      }),
        this._animationLoop();
    },
  }),
    (t.fn[n] = function (e) {
      var i = arguments;
      return e === s || "object" == typeof e
        ? this.each(function () {
            t.data(this, "plugin_" + n) ||
              t.data(this, "plugin_" + n, new o(this, e));
          })
        : "string" == typeof e && "_" !== e[0] && "init" !== e
        ? this.each(function () {
            var s = t.data(this, "plugin_" + n);
            s instanceof o &&
              "function" == typeof s[e] &&
              s[e].apply(s, Array.prototype.slice.call(i, 1)),
              "destroy" === e && t.data(this, "plugin_" + n, null);
          })
        : void 0;
    }),
    (t[n] = function () {
      var i = t(e);
      return i.stellar.apply(i, Array.prototype.slice.call(arguments, 0));
    }),
    (t[n].scrollProperty = a),
    (t[n].positionProperty = l),
    (e.Stellar = o);
})(jQuery, this, document);
